<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Scala, the Small Parts</title>

  
  <meta name="description" content="Scala has a minimalist design with few but powerful features that combine nicely together" />



<!-- facebook Open Graph Metadatas -->
<meta property="fb:admins"  content="1145810187" />
<meta property="fb:app_id"  content="529158857268335" />
<meta property="og:site_name" content="Reg's homepage | Régis Blanc" />
<meta property="og:locale" content="en_US" />


  <meta property="og:type" content="article" />



  <meta property="og:title" content="Scala, the Small Parts" />



  <meta property="og:description" content="Scala has a minimalist design with few but powerful features that combine nicely together" />



  <meta property="og:url" content="http://regblanc.com/blog/scala-the-small-parts/" />



  <meta property="og:image" content="http://regblanc.com/resources/mtg/looter-wide.jpg" />



  



  
    <meta property="article:tag" content="scala" />
  
    <meta property="article:tag" content="design" />
  
    <meta property="article:tag" content="library" />
  


<!-- not really sure if that's of any use, but probably can't hurt to integrate -->

  <meta property="article:published_time" content="2018-11-20T15:00:00+01:00" />



<!-- Twitter cards metadatas -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@regbla" />
<meta name="twitter:creator" content="@regbla" />


  <meta name="twitter:title" content="Scala, the Small Parts" />



<meta name="twitter:url" content="http://regblanc.com/blog/scala-the-small-parts/" />



  <meta name="twitter:description" content="Scala has a minimalist design with few but powerful features that combine nicely together" />



  <meta name="twitter:image" content="http://regblanc.com/resources/mtg/looter-square.jpg" />



  <link rel="stylesheet" href="/libcss/bootstrap.min.css">
  <link rel="stylesheet" href="/libcss/bootstrap-theme.min.css">
  <link rel="stylesheet" href="/libcss/font-awesome.min.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/syntax.css">


  <link rel="canonical" 
        href="http://regblanc.com/blog/scala-the-small-parts/">

</head>


  <body>

    <header class="site-header">

<!--
    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
          <a class="page-link" href="/blog/">Blog | Régis Blanc</a>
          
        
          
          <a class="page-link" href="/contact/">Contact</a>
          
        
          
        
          
          <a class="page-link" href="/games/">Games | Régis Blanc</a>
          
        
          
          <a class="page-link" href="/games/fish-escape/">Fish Escape | Android Game</a>
          
        
          
          <a class="page-link" href="/games/scalavator/">Scalavator | Game for Android, Web, and Windows</a>
          
        
          
        
          
        
          
          <a class="page-link" href="/games/winsmash/privacy/">WinSmash | Privacy Policy | Régis Blanc</a>
          
        
          
          <a class="page-link" href="/games/rat-trap/privacy/">Rat Trap | Privacy Policy | Régis Blanc</a>
          
        
          
          <a class="page-link" href="/projects/">My Projects | Régis Blanc</a>
          
        
          
          <a class="page-link" href="/games/rat-trap/">Rat Trap | Android Game</a>
          
        
          
          <a class="page-link" href="/games/winsmash/">WinSmash | Android Game</a>
          
        
          
        
          
        
      </div>
    </nav>
-->

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Régis Blanc</a>
        </div>
      <div id="navbar" class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li ><a href="/projects/">My Projects</a></li>
          <li ><a href="/blog/">Blog</a></li>
          <li ><a href="/about/">About</a></li>
          <li ><a href="/contact/">Contact</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </nav>

</header>


    <div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <div class="post">
      
        <header class="post-header">
          <h1 class="post-title">Scala, the Small Parts</h1>
          <p class="post-meta">Posted on Nov 20, 2018</p>
        </header>
      
        <article class="post-content">
          <p>In <a href="/blog/less-is-more/">Less is More</a>, we discussed how
Scala has a few, well-chosen, and independent features that combine in
countless ways to provide the expressive features of Scala as we know it.
However, the discussion remained mostly conceptual, with few examples. In this
post, I want to highlight several more examples that will make the whole
argument more concrete, so that you don’t need to take my word for it.</p>

<p>First, let us look again at at the <code class="language-plaintext highlighter-rouge">append</code> method on an <code class="language-plaintext highlighter-rouge">IntList</code>.</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">class</span> <span class="nc">IntList</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">append</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">IntList</span> <span class="o">=</span> <span class="o">???</span>
<span class="o">}</span></code></pre></figure>

<p>This is still used as follows:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">l1</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">IntList</span>  <span class="c1">// l1 = []</span>
<span class="k">val</span> <span class="nv">l2</span> <span class="k">=</span> <span class="nv">l1</span><span class="o">.</span><span class="py">append</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="c1">// l2 = [1]</span>
<span class="k">val</span> <span class="nv">l3</span> <span class="k">=</span> <span class="nv">l2</span><span class="o">.</span><span class="py">append</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="c1">// l3 = [1, 2]</span>
<span class="k">val</span> <span class="nv">l4</span> <span class="k">=</span> <span class="nv">l3</span><span class="o">.</span><span class="py">append</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="c1">// l4 = [1, 2, 3]</span></code></pre></figure>

<p>Simple and no surprise, however a tiny bit verbose. In a language like Go, the
<code class="language-plaintext highlighter-rouge">append</code> method can take an arbitrary number of elements in one call. In Scala,
that would look like this:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="nv">l1</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">IntList</span> 
<span class="k">val</span> <span class="nv">l4</span> <span class="k">=</span> <span class="nv">l1</span><span class="o">.</span><span class="py">append</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span></code></pre></figure>

<p>Of course, the compiler will not accept such code with the above definition of
<code class="language-plaintext highlighter-rouge">append</code>. But there is a way to fix it, using the varargs syntax:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">class</span> <span class="nc">IntList</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">append</span><span class="o">(</span><span class="n">xs</span><span class="k">:</span> <span class="kt">Int*</span><span class="o">)</span><span class="k">:</span> <span class="kt">IntList</span> <span class="o">=</span> <span class="o">???</span>
<span class="o">}</span></code></pre></figure>

<p>A type <code class="language-plaintext highlighter-rouge">T*</code> is essentially equivalent to <code class="language-plaintext highlighter-rouge">Seq[T]</code> and is easy to use at the
definition site. The caller is free to call the function with any number of
argurments of type <code class="language-plaintext highlighter-rouge">T</code>, or in this case of integers: <code class="language-plaintext highlighter-rouge">l.append(1)</code>,
<code class="language-plaintext highlighter-rouge">l.append(1,2)</code>, or <code class="language-plaintext highlighter-rouge">l.append(1,2,3)</code>. This is a syntax that makes sense when
it is just as common to use the function with a single argument as it is to use
it with two or three. Of course, if the function is always called with a long
list of elements, it’s better to just define a function that takes a sequence
as an argument. By itself, this is a fairly simple features, the compiler
simply wraps the variable number of arguments into a basic Sequence
datastructure.</p>

<p>Alright, time to introduce a new Scala feature: magic methods. There are a few
method names that enable a special syntax for method invocation. For example,
there is the setter syntax, <code class="language-plaintext highlighter-rouge">name_=</code> which enables a lightweight getter and
setter syntax for classes. Another common example is <code class="language-plaintext highlighter-rouge">apply</code>, which sorts of
transforms the instances of the class into functions. Indeed, an instance of a
class with an <code class="language-plaintext highlighter-rouge">apply</code> method can be applied to a value, just like a function.
Sequences are examples of classes with <code class="language-plaintext highlighter-rouge">apply</code> method:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">trait</span> <span class="nc">Seq</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">T</span> <span class="o">=</span> <span class="o">???</span>
<span class="o">}</span>
<span class="k">val</span> <span class="nv">s</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
<span class="nf">s</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="c1">// returns 2</span></code></pre></figure>

<p>Here we used <code class="language-plaintext highlighter-rouge">s</code> as a function by applying it on <code class="language-plaintext highlighter-rouge">1</code>, which essentially
returned the second element of the sequence. The compiler implicitly rewrites
all such function application as <code class="language-plaintext highlighter-rouge">s.apply(1)</code>. These methods might seem magic,
and they are, but there is just a small well-defined set of them, and they can
be used to achieve very neat effects.</p>

<p>One such effect is when they are combined with companion objects. Companion
objects are yet another convenient Scala feature. They can essentially be
defined next to a class to provide some static methods. Back at our sequence
example:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">trait</span> <span class="nc">Seq</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span>
<span class="nc">object</span> <span class="nc">Seq</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">apply</span><span class="o">[</span><span class="kt">T</span><span class="o">](</span><span class="n">elements</span><span class="k">:</span> <span class="kt">T*</span><span class="o">)</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>
<span class="o">}</span>
<span class="k">val</span> <span class="nv">s</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span></code></pre></figure>

<p>We defined a <code class="language-plaintext highlighter-rouge">Seq</code> object, which is a short-hand notation for a singleton
object of an unnamed type that contains just the methods defined within that
object. In the example above, it’s just the <code class="language-plaintext highlighter-rouge">apply</code> method. You can then use
<code class="language-plaintext highlighter-rouge">Seq.apply(???)</code> in any context. Notice the statement below, we have seen it
before. We have used it as an intuitive way to create a sequence with three
elements. At the time it might have looked like built-in syntax, but now you
can see that it’s just a combination of a singleton object <code class="language-plaintext highlighter-rouge">Seq</code> with an
<code class="language-plaintext highlighter-rouge">apply</code> magic method that takes a variable number of arguments — three
independently useful and well-defined features.</p>

<p>Let’s conclude this tour of Scala by looking at for-comprehensions. I will not
go into the details of how for-comprehensions are desugared into <code class="language-plaintext highlighter-rouge">map</code>,
<code class="language-plaintext highlighter-rouge">flatMap</code>, and <code class="language-plaintext highlighter-rouge">filter</code>, as this would require to introduce all these methods.
But you can find a comprehensive (no pun intended) discussion of this on the
<a href="https://docs.scala-lang.org/tutorials/FAQ/yield.html">official Scala website</a>.
The key take-away is that any type can be made compatible with a for-notation,
as long as it defines the proper methods.</p>

<p>I would like to look at one particularly popular for-notation:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nf">for</span><span class="o">(</span><span class="n">i</span> <span class="k">&lt;-</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span><span class="o">)</span>
  <span class="nf">println</span><span class="o">(</span><span class="n">i</span><span class="o">)</span></code></pre></figure>

<p>At first glance, it looks like a totally new and magic notation. We know two
standard ways of defining variables in scala, <code class="language-plaintext highlighter-rouge">val</code> and <code class="language-plaintext highlighter-rouge">var</code>, this notation
looks like it’s introducing a third one.  And it does, but it’s a bit more
subtle than that. It’s a special notation to bind each element of the list on
the right-hand side, so more generally it will be written as <code class="language-plaintext highlighter-rouge">for(x &lt;- xs)
...</code>, with <code class="language-plaintext highlighter-rouge">xs</code> being a sequence. And in many ways, this is equivalent to
<code class="language-plaintext highlighter-rouge">xs.foreach(x =&gt; ...)</code>. So here <code class="language-plaintext highlighter-rouge">for</code> is really some syntactic sugar to define
a lambda function on top of a sequence. The reason for introducing this has to
do with the powerful for-comprehension features that were mentioned above.</p>

<p>What about the <code class="language-plaintext highlighter-rouge">1 to 10</code>? Well, remember infix notation? If you do, you would
know that we are really looking at <code class="language-plaintext highlighter-rouge">1.to(10)</code>. Does that look confusing? Well
that might be because you got used to most other languages treating integers as
some kind of built-in type, but that’s not how it works in Scala. In scala, an
<code class="language-plaintext highlighter-rouge">Int</code> is just a regular type with its class definition (the details are
slightly more messy, but let’s gloss over them for the sake of the argument):</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">class</span> <span class="nc">Int</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">to</span><span class="o">(</span><span class="n">u</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="o">???</span>
<span class="o">}</span>
<span class="k">val</span> <span class="nv">xs</span> <span class="k">=</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">5</span> <span class="c1">// returns Seq(1,2,3,4,5)</span></code></pre></figure>

<p>Well now we are fully equipped to rewrite the original for loop:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="nf">for</span><span class="o">(</span><span class="n">i</span> <span class="k">&lt;-</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">10</span><span class="o">)</span>
  <span class="nf">println</span><span class="o">(</span><span class="n">i</span><span class="o">)</span></code></pre></figure>

<p>as:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="o">(</span><span class="mf">1.</span><span class="nf">to</span><span class="o">(</span><span class="mi">10</span><span class="o">)).</span><span class="py">foreach</span><span class="o">(</span><span class="n">i</span> <span class="k">=&gt;</span> <span class="nf">println</span><span class="o">(</span><span class="n">i</span><span class="o">))</span></code></pre></figure>

<p>which definitely feels less magical, but also definitely more ugly. No wonder
Scala programmers will favor the former notation.</p>

        </article>

        <div class="share-page">

  <div class="row">

    <div class="col-xs-12 col-md-4">
      <div class="social-media-share-lead">Share this on &rarr;</div>
    </div>

    <div class="col-xs-12 col-md-8">
    <ul class="social-media-share-list">

      <li class="social-media-share-item social-media-share-twitter">
        <a href="https://twitter.com/intent/tweet?text=Scala, the Small Parts&url=http://regblanc.com/blog/scala-the-small-parts/&via=regbla&related=regbla"
           rel="nofollow" target="_blank" title="Share on Twitter">
          <i class="fa fa-twitter fa-1x"></i> Twitter
        </a>
      </li>

      <li class="social-media-share-item social-media-share-fb">
        <a href="https://facebook.com/sharer.php?u=http://regblanc.com/blog/scala-the-small-parts/" rel="nofollow" 
           target="_blank" title="Share on Facebook">
          <i class="fa fa-facebook fa-1x"></i> Facebook
        </a>
      </li>

    </ul>
    </div>


</div>

      
      </div>
    </div>
  </div>
</div>


    <footer class="site-footer">

  <ul class="social-media-list">
    <li class="social-media-item">
      <a href="https://github.com/regb">
        <i class="fa fa-github fa-5x"></i>
      </a>
    </li>
    <li class="social-media-item">
      <a href="https://twitter.com/regbla">
        <i class="fa fa-twitter fa-5x"></i>
      </a>
    </li>
    <li class="social-media-item">
      <a href="http://instagram.com/regisbla">
        <i class="fa fa-instagram fa-5x"></i>
      </a>
    </li>
  </ul>

  <p class="copyright text-muted">
    Copyright © Régis Blanc
  </p>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="/libjs/bootstrap.min.js"></script>

</footer>


  </body>

</html>
